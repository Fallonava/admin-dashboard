<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Jadwal Dokter - RSU Siaga Medika</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <style>
        :root {
            /* Semantic Base Colors (Default Dark) */
            --bg-body: #000000;
            --bg-ambient: radial-gradient(circle at 10% 20%, rgba(10, 132, 255, 0.4) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(191, 90, 242, 0.4) 0%, transparent 40%),
                radial-gradient(circle at 50% 50%, rgba(48, 209, 88, 0.15) 0%, transparent 60%);
            --text-primary: #f5f5f7;
            --text-secondary: rgba(235, 235, 245, 0.6);
            /* Performance: Higher opacity to replace blur */
            --glass-panel: rgba(30, 30, 35, 0.90);
            --card-bg: rgba(44, 44, 46, 0.95);
            --header-bg: rgba(255, 255, 255, 0.03);
            --border-light: rgba(255, 255, 255, 0.08);
            --platter-border: rgba(255, 255, 255, 0.05);
            --footer-bg: rgba(20, 20, 22, 0.95);
            --app-bg-overlay: rgba(20, 20, 22, 0.85);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
            --accent-blue: #0A84FF;
            --accent-purple: #BF5AF2;
            --accent-green: #30D158;
            --accent-orange: #FF9F0A;
            --accent-red: #FF453A;
            --logo-text: #ffffff;
        }

        /* Light Mode Theme */
        [data-theme="light"] {
            --bg-body: #f5f5f7;
            --bg-ambient: radial-gradient(circle at 10% 20%, rgba(10, 132, 255, 0.25) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(191, 90, 242, 0.25) 0%, transparent 40%),
                radial-gradient(circle at 50% 50%, rgba(48, 209, 88, 0.1) 0%, transparent 60%);
            --text-primary: #1d1d1f;
            --text-secondary: rgba(60, 60, 67, 0.6);
            --glass-panel: rgba(255, 255, 255, 0.90);
            --card-bg: rgba(255, 255, 255, 0.95);
            --header-bg: rgba(0, 0, 0, 0.03);
            --border-light: rgba(0, 0, 0, 0.08);
            --platter-border: rgba(0, 0, 0, 0.05);
            --footer-bg: rgba(255, 255, 255, 0.95);
            --app-bg-overlay: rgba(255, 255, 255, 0.85);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
            /* Softer shadow */
            --logo-text: #ffffff;
        }

        /* ===== LIGHT MODE SIDEBAR TEXT ADJUSTMENTS ===== */
        [data-theme="light"] .title-group h1,
        [data-theme="light"] .clock,
        [data-theme="light"] .status-header h3 {
            color: #1d1d1f !important;
            text-shadow: none !important;
        }

        [data-theme="light"] .title-group span,
        [data-theme="light"] .date {
            color: #86868b !important;
        }

        /* Ensure Sidebar Headers have some contrast */
        [data-theme="light"] .status-header {
            background: rgba(255, 255, 255, 0.5) !important;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1) !important;
        }

        /* Mini Card Text in Light Mode */
        [data-theme="light"] .mini-card .name {
            color: #1d1d1f !important;
        }

        [data-theme="light"] .mini-card .spec {
            color: #86868b !important;
        }

        /* ===== LIGHT MODE LAYOUT & COMPONENT OVERRIDES ===== */
        [data-theme="light"] .app-container {
            gap: 24px;
            padding: 24px;
            background: #F2F4F6;
        }

        /* Sidebar Container: Gradient Blur */
        [data-theme="light"] .sidebar {
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.6) 0%, rgba(255, 255, 255, 0.2) 100%) !important;
            backdrop-filter: blur(20px) !important;
            -webkit-backdrop-filter: blur(20px) !important;
            border-right: 1px solid rgba(255, 255, 255, 0.4) !important;
            padding: 1px;
            /* Restore padding */
            gap: 20px;
            overflow: visible;
        }

        /* Floating Cards in Sidebar */
        [data-theme="light"] .sidebar-header {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            margin-bottom: 0;
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        [data-theme="light"] .status-section {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.5);
            margin-top: 0 !important;
            border-top: none !important;
            flex: 1;
        }

        [data-theme="light"] .sidebar-content {
            overflow: visible;
            gap: 20px;
            display: flex;
            flex-direction: column;
        }

        /* Main Content */
        [data-theme="light"] .content {
            padding: 0;
        }

        [data-theme="light"] .island {
            background: #FFFFFF;
            border: 1px solid rgba(0, 0, 0, 0.03);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.03);
            border-radius: 28px;
        }

        [data-theme="light"] .island-header {
            background: transparent;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        /* Platter (Doctor Cards) Styles */
        [data-theme="light"] .platter {
            background: #FFFFFF;
            border: 1px solid #E5E5EA;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.02);
        }

        /* Category Borders */
        [data-theme="light"] .platter:has(.avatar) {
            /* Fallback generic */
        }

        /* Note: JS injects .cat-bedah / .cat-non classes now, verify in render() */

        /* Status colors in light mode */
        [data-theme="light"] .st-nopoli {
            background: #F5F5F7;
            border-color: transparent;
            opacity: 0.6;
            box-shadow: none;
        }

        /* Footer Floating */
        [data-theme="light"] .footer {
            background: #FFFFFF;
            border: 1px solid rgba(0, 0, 0, 0.03);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
            border-radius: 100px;
            margin-top: auto;
        }

        /* RED ACCENT RESTORATION FOR LIGHT */
        [data-theme="light"] .status-section:nth-of-type(2) .status-header h3::before {
            background: #FF375F !important;
            box-shadow: 0 0 8px #FF375F !important;
        }

        /* ===== RESET & BASE ===== */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-font-smoothing: antialiased;
        }

        html,
        body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: 'Inter', -apple-system, sans-serif;
            background: var(--bg-body);
            color: var(--text-primary);
            user-select: none;
            cursor: none;
            transition: background 0.8s ease, color 0.8s ease;
        }

        .ambient-bg {
            position: fixed;
            inset: 0;
            z-index: 0;
            /* Performance: Static background, no animation */
            background: radial-gradient(circle at 50% 50%, rgba(10, 132, 255, 0.1) 0%, transparent 60%);
            opacity: 0.5;
        }

        /* ===== HARDWARE SAFE MODE (TCL/Android TV Optimization) ===== */
        @media (prefers-reduced-motion: reduce) {
            .ambient-bg {
                animation: none;
                opacity: 1;
                background: #1c1c1e;
            }

            .app-container,
            .footer {
                backdrop-filter: none !important;
                background: rgba(20, 20, 22, 0.95);
            }

            .platter {
                box-shadow: none;
                border: 1px solid rgba(255, 255, 255, 0.1);
            }

            * {
                animation-duration: 0s !important;
                transition-duration: 0s !important;
            }
        }

        @keyframes breathe {
            0% {
                transform: scale(1);
                opacity: 0.5;
            }

            100% {
                transform: scale(1.1);
                opacity: 0.7;
            }
        }

        /* ===== LAYOUT CONTAINER ===== */
        .app-container {
            position: relative;
            z-index: 1;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: row;
            /* Horizontal layout */
            background: var(--app-bg-overlay);
            padding: 0;
            /* Remove padding from container */
            gap: 0;
            /* Remove gap from container */
        }

        /* ===== NEW PLATTER (DOCTOR CARD) DESIGN ===== */
        .platter {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 18px 24px;
            margin-bottom: 16px;
            border: 1px solid var(--platter-border);
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        .platter-body {
            display: flex;
            align-items: center;
            gap: 20px;
            width: 100%;
        }

        /* Avatar */
        .avatar-col {
            flex-shrink: 0;
        }

        .avatar {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3a3a3c, #2c2c2e);
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.05);
        }

        /* Info Column */
        .info-col {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-width: 0;
            /* Text truncation safety */
        }

        .doc-name {
            font-size: 19px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            letter-spacing: -0.01em;
        }

        .doc-spec {
            font-size: 13px;
            font-weight: 500;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* Status Column */
        .status-col {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 6px;
        }

        .status-pill {
            font-size: 11px;
            font-weight: 700;
            padding: 4px 10px;
            border-radius: 6px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            background: rgba(125, 125, 125, 0.2);
            color: rgba(255, 255, 255, 0.8);
        }

        /* Time Group Styles */
        .time-group-s {
            display: flex;
            flex-direction: column;
            gap: 2px;
            margin-bottom: 4px;
            text-align: right;
        }

        .tg-row {
            display: flex;
            justify-content: flex-end;
            align-items: baseline;
            gap: 8px;
        }

        .tg-label {
            font-size: 9px;
            font-weight: 600;
            color: var(--text-secondary);
            letter-spacing: 0.05em;
        }

        .tg-val {
            font-size: 14px;
            font-weight: 700;
            color: var(--text-primary);
            font-feature-settings: "tnum";
            min-width: 40px;
        }

        .active-time {
            color: #30D158;
            font-size: 16px;
        }

        [data-theme="light"] .tg-val {
            color: #1d1d1f !important;
        }

        [data-theme="light"] .active-time {
            color: #30D158 !important;
        }

        /* New Practice Time in Info Col */
        .doc-jam {
            font-size: 11px;
            color: var(--text-secondary);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 4px;
            margin-top: 2px;
            opacity: 0.9;
        }

        /* Shift Pill Tags */
        .shift-pills {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
            margin-top: 4px;
        }

        .shift-pill {
            display: inline-flex;
            align-items: center;
            gap: 3px;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 600;
            border: 1px solid rgba(255, 255, 255, 0.08);
            background: rgba(255, 255, 255, 0.04);
            color: var(--text-secondary);
            letter-spacing: 0.02em;
        }

        .shift-pill.sp-active {
            background: rgba(48, 209, 88, 0.15);
            border-color: rgba(48, 209, 88, 0.3);
            color: #30D158;
        }

        .shift-pill.sp-active .sp-dot {
            display: inline-block;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            background: #30D158;
            animation: spPulse 1.5s ease-in-out infinite;
        }

        .shift-pill.sp-disabled {
            background: rgba(255, 69, 58, 0.05);
            border-color: rgba(255, 69, 58, 0.15);
            color: rgba(255, 69, 58, 0.5);
            text-decoration: line-through;
        }

        @keyframes spPulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.3;
            }
        }

        [data-theme="light"] .shift-pill {
            background: rgba(0, 0, 0, 0.04);
            border-color: rgba(0, 0, 0, 0.08);
        }

        [data-theme="light"] .shift-pill.sp-active {
            background: rgba(48, 209, 88, 0.1);
            border-color: rgba(48, 209, 88, 0.25);
        }

        [data-theme="light"] .shift-pill.sp-disabled {
            background: rgba(255, 69, 58, 0.05);
            border-color: rgba(255, 69, 58, 0.1);
        }

        [data-theme="light"] .doc-jam {
            color: #86868b !important;
        }

        /* Large Call Time */
        .tg-val-lg {
            font-size: 26px;
            /* Massive */
            font-weight: 800;
            color: var(--text-primary);
            font-feature-settings: "tnum";
            line-height: 1;
        }

        .active-time-lg {
            color: #30D158;
            font-size: 32px;
            /* Even bigger for active */
            text-shadow: 0 0 20px rgba(48, 209, 88, 0.4);
        }

        [data-theme="light"] .tg-val-lg {
            color: #1d1d1f !important;
        }

        [data-theme="light"] .active-time-lg {
            color: #30D158 !important;
        }


        /* Legacy Jam Box - Removed/Hidden */



        /* ===== STATE COLORS ===== */
        /* Active (BUKA) */
        .st-buka {
            /* border-left removed to avoid duplicate with ::before */
            background: linear-gradient(90deg, rgba(48, 209, 88, 0.1), rgba(48, 209, 88, 0.02) 50%, transparent);
        }

        .st-buka .q-val {
            color: #30D158;
        }

        .st-buka .status-pill {
            background: #30D158;
            color: #fff;
            box-shadow: 0 2px 10px rgba(48, 209, 88, 0.4);
        }

        /* Non-Active States */
        .st-penuh {
            /* border-left removed */
        }

        .st-penuh .status-pill {
            color: #FF9F0A;
            background: rgba(255, 159, 10, 0.15);
        }

        .st-selesai {
            /* border-left removed */
        }

        .st-selesai .status-pill {
            color: #0A84FF;
            background: rgba(10, 132, 255, 0.15);
        }

        .st-nopoli {
            /* border-left removed */
            opacity: 0.7;
        }

        /* LIGHT MODE SPECIFICS for Platter */
        [data-theme="light"] .platter {
            background: #FFFFFF !important;
            border: 1px solid rgba(0, 0, 0, 0.05) !important;
            /* Thin Shadow + Soft Ambient */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05), 0 8px 24px rgba(0, 0, 0, 0.04) !important;
        }

        [data-theme="light"] .doc-name {
            color: #1d1d1f !important;
        }

        [data-theme="light"] .doc-spec {
            color: #86868b !important;
        }

        [data-theme="light"] .jam-val {
            color: #1d1d1f !important;
        }

        [data-theme="light"] .st-buka {
            /* border-left removed */
            background: linear-gradient(90deg, rgba(48, 209, 88, 0.08), transparent) !important;
        }

        .sidebar {
            width: 320px;
            height: 100%;
            background: rgba(0, 0, 0, 0);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: column;
            padding: 24px;
            gap: 24px;
            flex-shrink: 0;
            z-index: 2;
            backdrop-filter: blur(20px);
        }

        .sidebar-header {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        /* Replaces .header for sidebar context */
        .brand {
            display: flex;
            align-items: center;
            gap: 14px;
        }

        /* Adjustments for vertical header */
        .title-group h1 {
            font-size: 16px;
            line-height: 1.2;
        }

        .title-group span {
            font-size: 10px;
        }

        .time-group {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 16px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            margin-bottom: 8px;
        }

        .clock {
            font-size: 36px;
            text-align: left;
        }

        .date {
            text-align: left;
            margin-top: 0;
        }

        /* Sidebar Lists */
        .sidebar-content {
            flex: 1;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            gap: 0;
            /* Masking for auto-scroll */
        }

        #sidebarScroller {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 24px;
            padding-right: 4px;
            will-change: transform;
        }

        /* Updated Sidebar Headers (Locked & Aesthetic) */
        .status-header {
            padding-bottom: 12px;
            margin-bottom: 0;
            flex-shrink: 0;
            position: relative;
            z-index: 2;
        }

        .status-header h3 {
            font-size: 11px;
            font-weight: 800;
            color: rgba(255, 255, 255, 0.9);
            /* Brighter for headers */
            letter-spacing: 0.12em;
            text-transform: uppercase;
            display: flex;
            align-items: center;
            gap: 8px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .status-header h3::before {
            content: '';
            width: 6px;
            height: 6px;
            background: var(--accent-orange);
            border-radius: 50%;
            box-shadow: 0 0 8px var(--accent-orange);
        }

        /* Separator Line */
        .status-header::after {
            content: '';
            position: absolute;
            bottom: 4px;
            left: 0;
            width: 100%;
            height: 1px;
            background: linear-gradient(90deg, rgba(255, 255, 255, 0.15), transparent);
        }

        /* ISLAND HEADER ACCENTS */
        .island-header.bedah {
            border-bottom: 1px solid rgba(48, 209, 88, 0.3);
            background: linear-gradient(90deg, rgba(48, 209, 88, 0.1), transparent);
        }

        .island-header.bedah .island-title {
            color: #30D158;
            opacity: 1;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .island-header.non-bedah {
            border-bottom: 1px solid rgba(10, 132, 255, 0.3);
            background: linear-gradient(90deg, rgba(10, 132, 255, 0.1), transparent);
        }

        .island-header.non-bedah .island-title {
            color: #0A84FF;
            opacity: 1;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Specific header colors for Sidebar */
        .status-section:nth-of-type(2) .status-header h3::before {
            background: var(--accent-red);
            /* Cuti is Red/Pink */
            box-shadow: 0 0 8px var(--accent-red);
        }

        /* Mini Card for Sidebar */
        .mini-card {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            padding: 12px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        /* Penuh (Full) Styling */
        .mini-card.st-penuh {
            background: linear-gradient(90deg, rgba(255, 69, 58, 0.15), rgba(255, 69, 58, 0.05));
            border-left: 3px solid #FF453A;
            border-color: rgba(255, 69, 58, 0.3);
            box-shadow: 0 4px 12px rgba(255, 69, 58, 0.1);
        }

        /* Cuti (Leave) Styling */
        .mini-card.st-cuti {
            background: linear-gradient(90deg, rgba(255, 55, 95, 0.15), rgba(255, 55, 95, 0.05));
            border-left: 3px solid #FF375F;
            border-color: rgba(255, 55, 95, 0.3);
            box-shadow: 0 4px 12px rgba(255, 55, 95, 0.1);
        }

        .mini-card .avatar {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: 700;
            color: white;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            flex-shrink: 0;
        }

        .st-penuh .avatar {
            background: #FF453A;
            color: white;
        }

        .st-cuti .avatar {
            background: #FF375F;
            color: white;
        }

        .mini-card .info {
            flex: 1;
            min-width: 0;
        }

        .mini-card .name {
            font-size: 12px;
            font-weight: 700;
            color: white;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-bottom: 2px;
        }

        .mini-card .spec {
            font-size: 10px;
            color: rgba(255, 255, 255, 0.6);
            font-weight: 500;
            text-transform: uppercase;
        }

        .mini-card .status {
            font-size: 9px;
            font-weight: 800;
            text-transform: uppercase;
            padding: 4px 8px;
            border-radius: 6px;
            background: rgba(255, 255, 255, 0.1);
            letter-spacing: 0.05em;
        }

        .st-penuh .status {
            color: #FF453A;
            background: rgba(255, 69, 58, 0.15);
        }

        .st-cuti .status {
            color: #FF375F;
            background: rgba(255, 55, 95, 0.15);
        }

        /* Main Content Adjustment */
        .content {
            flex: 1;
            padding: 24px;
            gap: 24px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 14px;
        }

        .logo-box {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 16px rgba(10, 132, 255, 0.3);
        }

        .logo-icon {
            font-size: 26px;
            color: white;
        }

        .title-group h1 {
            font-size: 18px;
            font-weight: 700;
            letter-spacing: -0.02em;
            line-height: 1.1;
            color: var(--text-primary);
        }

        .title-group span {
            font-size: 11px;
            font-weight: 500;
            opacity: 0.7;
            letter-spacing: 0.02em;
            text-transform: uppercase;
            color: var(--text-secondary);
        }

        .time-group {
            text-align: right;
        }

        .clock {
            font-size: 32px;
            font-weight: 400;
            letter-spacing: -0.03em;
            font-variant-numeric: tabular-nums;
            line-height: 1;
        }

        .date {
            font-size: 12px;
            font-weight: 600;
            opacity: 0.6;
            letter-spacing: 0.02em;
            text-transform: uppercase;
            margin-top: 2px;
        }

        /* ===== CONTENT GRID ===== */
        .content {
            flex: 1;
            display: flex;
            gap: 20px;
            min-height: 0;
        }

        .island {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--glass-panel);
            border-radius: 24px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-light);
            /* Subtle glass border */
            overflow: hidden;
            transition: background 0.8s ease, border-color 0.8s ease;
        }

        .island-header {
            height: 52px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            flex-shrink: 0;
            background: var(--header-bg);
            border-bottom: 1px solid var(--border-light);
            transition: background 0.8s ease, border-color 0.8s ease;
        }

        .island-title {
            font-size: 12px;
            font-weight: 700;
            opacity: 0.6;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .island-badge {
            font-size: 12px;
            font-weight: 700;
            background: rgba(125, 125, 125, 0.15);
            color: var(--text-primary);
            padding: 2px 8px;
            border-radius: 6px;
        }

        .scroll-mask {
            flex: 1;
            overflow: hidden;
            position: relative;
            /* Fade masks for scroll feel */
            mask-image: linear-gradient(to bottom, transparent, black 16px, black calc(100% - 16px), transparent);
            -webkit-mask-image: linear-gradient(to bottom, transparent, black 16px, black calc(100% - 16px), transparent);
        }

        .scroller {
            padding: 16px 16px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            will-change: transform;
            /* Hint to browser compositor */
        }

        /* ===== PLATTER CARD ===== */
        .platter {
            display: flex;
            align-items: center;
            gap: 14px;
            padding: 14px 18px;
            background: var(--card-bg);
            border-radius: 20px;
            /* Edge Glow (Top/Left highlight) */
            border: 1px solid var(--platter-border);
            box-shadow:
                0 4px 12px rgba(0, 0, 0, 0.1),
                inset 1px 1px 1px var(--border-light);
            transition: all 0.6s cubic-bezier(0.2, 0.8, 0.2, 1);
            position: relative;
            overflow: hidden;
            transform: translateZ(0);
        }

        /* Light Sweep Effect */
        .platter::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg,
                    transparent 40%,
                    rgba(255, 255, 255, 0.03) 45%,
                    rgba(255, 255, 255, 0.06) 50%,
                    rgba(255, 255, 255, 0.03) 55%,
                    transparent 60%);
            transform: rotate(25deg);
            pointer-events: none;
            opacity: 0;
        }

        .platter.st-buka::after {
            animation: lightSweep 8s infinite cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 1;
        }

        @keyframes lightSweep {
            0% {
                transform: translateX(-100%) rotate(25deg);
            }

            30% {
                transform: translateX(100%) rotate(25deg);
            }

            100% {
                transform: translateX(100%) rotate(25deg);
            }
        }

        /* Status Edge Accent */
        .platter::before {
            content: '';
            position: absolute;
            left: 0;
            top: 12px;
            bottom: 12px;
            width: 3.5px;
            background: var(--status-color);
            border-radius: 0 4px 4px 0;
            opacity: 0.8;
        }

        /* Avatar */
        .initials {
            width: 46px;
            height: 46px;
            border-radius: 14px;
            background: rgba(125, 125, 125, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 800;
            letter-spacing: -0.02em;
            color: var(--text-primary);
            flex-shrink: 0;
            position: relative;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.05), 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        /* Info */
        .info-col {
            flex: 1;
            min-width: 0;
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .doc-name {
            font-size: 15px;
            font-weight: 600;
            color: var(--text-primary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            letter-spacing: -0.015em;
        }

        /* Specialty Kicker Style */
        .doc-spec {
            font-size: 8.5px;
            font-weight: 700;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.12em;
            margin-top: 1px;
        }

        /* Meta */
        .meta-col {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 6px;
            flex-shrink: 0;
        }

        .status-pill {
            padding: 4px 12px;
            border-radius: 8px;
            font-size: 9.5px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.06em;
            background: var(--status-bg);
            color: var(--status-color);
            display: flex;
            align-items: center;
            gap: 4.5px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
        }

        /* Jam / Call Info */
        .jam-box {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
        }

        .jam-label {
            font-size: 7.5px;
            font-weight: 800;
            opacity: 0.5;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            margin-bottom: 0.5px;
        }

        .jam-val {
            font-size: 16px;
            font-weight: 800;
            color: var(--text-primary);
            font-variant-numeric: tabular-nums;
            letter-spacing: -0.02em;
            line-height: 1;
        }

        /* Status Styles */
        .st-buka {
            --status-color: #30D158;
            --status-bg: rgba(48, 209, 88, 0.2);
        }

        .st-penuh {
            --status-color: #FF9F0A;
            --status-bg: rgba(255, 159, 10, 0.2);
        }

        .st-selesai {
            --status-color: #0A84FF;
            --status-bg: rgba(10, 132, 255, 0.2);
            opacity: 0.75;
        }

        .st-cuti {
            --status-color: #FF453A;
            --status-bg: rgba(255, 69, 58, 0.2);
            opacity: 0.65;
        }

        .st-nopoli {
            --status-color: #8E8E93;
            --status-bg: rgba(142, 142, 147, 0.2);
            opacity: 0.5;
        }

        /* Active Premium Highlight (The Apple Touch) */
        .platter.st-buka {
            background: rgba(255, 255, 255, 0.14);
            border-color: rgba(48, 209, 88, 0.35);
            /* Soft Ambient Glow matching status color */
            box-shadow:
                0 12px 30px rgba(0, 0, 0, 0.15),
                0 0 15px rgba(48, 209, 88, 0.12),
                inset 1px 1px 1px rgba(255, 255, 255, 0.08);
            transform: scale(1.01);
            z-index: 5;
        }

        [data-theme="light"] .platter.st-buka {
            background: rgba(255, 255, 255, 0.9);
            box-shadow:
                0 12px 30px rgba(48, 209, 88, 0.15),
                0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .platter.st-buka .initials {
            background: linear-gradient(135deg, rgba(48, 209, 88, 0.3), rgba(48, 209, 88, 0.15));
            color: #30D158;
            border: 1px solid rgba(48, 209, 88, 0.2);
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1), 0 4px 12px rgba(48, 209, 88, 0.2);
        }

        .platter.st-buka .jam-val {
            color: #30D158;
            text-shadow: 0 0 12px rgba(48, 209, 88, 0.5);
            font-size: 17px;
        }

        /* ===== ACTIVE CALL HIGHLIGHT (NEW) ===== */
        .platter {
            display: flex;
            flex-direction: column;
            /* Changed to column to support expansion */
            align-items: stretch;
            transition: all 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        .platter-main {
            display: flex;
            align-items: center;
            gap: 14px;
            width: 100%;
        }

        .platter.active {
            transform: scale(1.02) translateZ(20px);
            z-index: 100;
            background: #1c1c1e !important;
            /* Solid dark background for contrast */
            border: 1px solid #30D158 !important;
            box-shadow:
                0 24px 60px rgba(0, 0, 0, 0.5),
                0 0 0 1px rgba(48, 209, 88, 0.3);
            /* Subtle inner ring */
            padding-bottom: 2px;
        }

        /* Light Mode Override */
        [data-theme="light"] .platter.active {
            background: #ffffff !important;
            box-shadow:
                0 24px 60px rgba(0, 0, 0, 0.15),
                0 0 0 1px rgba(48, 209, 88, 0.3);
            color: #000 !important;
        }

        .platter.active::before {
            width: 6px;
            box-shadow: 0 0 15px #30D158;
            height: 100%;
            top: 0;
            bottom: 0;
            border-radius: 4px 0 0 4px;
        }

        .platter.active .initials {
            background: #30D158;
            color: #fff;
            box-shadow: 0 4px 12px rgba(48, 209, 88, 0.4);
            transform: scale(1.1);
            border: none;
        }

        .platter.active .doc-name {
            font-size: 18px;
            /* Slightly larger */
            text-shadow: none;
            /* Cleaner text */
            color: #fff !important;
            font-weight: 700;
            letter-spacing: -0.01em;
        }

        [data-theme="light"] .platter.active .doc-name {
            color: #000 !important;
        }

        [data-theme="light"] .platter.active .detail-label {
            color: rgba(0, 0, 0, 0.6);
        }

        [data-theme="light"] .platter.active .detail-time {
            color: #000;
        }

        /* ===== EXPANDED DETAIL (NEW) ===== */
        .platter-detail {
            max-height: 0;
            opacity: 0;
            overflow: hidden;
            transition: all 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);
            border-top: 1px solid rgba(255, 255, 255, 0);
            margin-top: 0;
            padding-top: 0;
        }

        .platter.active .platter-detail {
            max-height: 120px;
            opacity: 1;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .detail-info {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .detail-label {
            font-size: 9px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            opacity: 0.6;
            color: #fff;
        }

        .detail-time {
            font-size: 20px;
            font-weight: 700;
            color: #fff;
            font-variant-numeric: tabular-nums;
            letter-spacing: -0.5px;
        }

        .live-status {
            display: flex;
            align-items: center;
            gap: 8px;
            background: #30D158;
            /* Solid green for premium look */
            color: white;
            padding: 6px 14px;
            border-radius: 20px;
            box-shadow: 0 4px 15px rgba(48, 209, 88, 0.4);
            border: none;
        }

        .pulse-dot {
            width: 8px;
            height: 8px;
            background: #fff;
            border-radius: 50%;
            animation: pulse-white 2s infinite;
        }

        .live-text {
            font-size: 10px;
            font-weight: 800;
            color: #fff;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        @keyframes pulse-white {
            0% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.7);
            }

            70% {
                transform: scale(1);
                box-shadow: 0 0 0 6px rgba(255, 255, 255, 0);
            }

            100% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(255, 255, 255, 0);
            }
        }

        /* Active Badge (removed in favor of live status) */
        .active-badge {
            display: none;
        }

        /* ===== DYNAMIC ISLAND (NEW) ===== */
        .dynamic-island {
            position: absolute;
            top: 16px;
            left: 50%;
            transform: translateX(-50%) scale(0);
            height: 38px;
            width: 120px;
            background: #000;
            border-radius: 20px;
            z-index: 999;
            display: flex;
            align-items: center;
            justify-content: center;
            /* Apple Spring Physics */
            transition: width 0.6s cubic-bezier(0.3, 1.3, 0.3, 1),
                height 0.6s cubic-bezier(0.3, 1.3, 0.3, 1),
                transform 0.6s cubic-bezier(0.3, 1.3, 0.3, 1),
                opacity 0.4s ease;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25);
            overflow: hidden;
            opacity: 0;
            will-change: width, height, transform, opacity;
        }

        .dynamic-island.expanded {
            transform: translateX(-50%) scale(1);
            opacity: 1;
            width: 340px;
            height: 58px;
            border-radius: 36px;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.45);
        }

        .di-content {
            display: flex;
            align-items: center;
            gap: 12px;
            opacity: 0;
            transform: scale(0.9);
            transition: all 0.3s ease;
            width: 100%;
            padding: 0 16px;
        }

        .dynamic-island.expanded .di-content {
            opacity: 1;
            transform: scale(1);
        }

        .di-spinner {
            width: 18px;
            height: 18px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top: 2px solid #30D158;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .di-icon {
            font-size: 20px;
            color: #fff;
        }

        .di-text {
            display: flex;
            flex-direction: column;
            line-height: 1.2;
        }

        .di-title {
            font-size: 11px;
            font-weight: 700;
            color: rgba(255, 255, 255, 0.6);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .di-msg {
            font-size: 13px;
            font-weight: 600;
            color: #fff;
            white-space: nowrap;
        }

        .di-warn .di-spinner {
            border-top-color: #FF453A;
        }

        .di-warn .di-msg {
            color: #FF453A;
        }

        .di-icon[textContent="check_circle"] {
            color: #30D158;
        }

        /* Or simply use a class if we want to be more explicit, but the JS uses material icons text */
        .material-icons-round.di-icon {
            color: #fff;
        }

        /* Shake Animation for Warnings */
        @keyframes shake {

            0%,
            100% {
                transform: translateX(-50%) scale(1);
            }

            20% {
                transform: translateX(-52%) scale(1);
            }

            40% {
                transform: translateX(-48%) scale(1);
            }

            60% {
                transform: translateX(-51%) scale(1);
            }

            80% {
                transform: translateX(-49%) scale(1);
            }
        }

        .dynamic-island.shake {
            animation: shake 0.4s ease-in-out;
            border: 1px solid rgba(255, 69, 58, 0.3);
        }

        /* Since CSS doesn't have :contains, let's just add a success class in JS or use a reliable selector */
        .di-success .di-icon {
            color: #30D158;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        /* ===== FOOTER "DYNAMIC ISLAND" ===== */
        .footer {
            height: 48px;
            background: var(--footer-bg);
            border-radius: 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            border: 1px solid var(--border-light);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            flex-shrink: 0;
            /* Performance: Removed backdrop-filter */
            transition: background 0.8s ease, border-color 0.8s ease;
        }

        .legend {
            display: flex;
            gap: 16px;
            padding-right: 20px;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }

        .lg-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 11px;
            font-weight: 600;
            opacity: 0.7;
        }

        .dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
        }

        .ticker {
            flex: 1;
            margin: 0 20px;
            position: relative;
            overflow: hidden;
            height: 100%;
            display: flex;
            align-items: center;
        }

        .ticker-inner {
            white-space: nowrap;
            animation: marquee 30s linear infinite;
            font-size: 13px;
            font-weight: 500;
            color: var(--text-primary);
        }

        @keyframes marquee {
            0% {
                transform: translateX(0);
            }

            100% {
                transform: translateX(-100%);
            }
        }

        .status-pill-lg {
            background: rgba(125, 125, 125, 0.15);
            padding: 4px 12px;
            border-radius: 100px;
            font-size: 10px;
            font-weight: 700;
            letter-spacing: 0.05em;
            display: flex;
            align-items: center;
            gap: 6px;
            color: var(--text-primary);
        }

        .live-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: #30D158;
            box-shadow: 0 0 8px #30D158;
        }

        .live-dot.warn {
            background: #FF9F0A;
            box-shadow: none;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            50% {
                opacity: 0.5;
            }
        }

        /* ===== SKELETON ===== */
        .skel {
            background: rgba(125, 125, 125, 0.1);
            border-radius: 4px;
            animation: pulse-bg 1.5s infinite;
        }

        @keyframes pulse-bg {
            0% {
                opacity: 0.6;
            }

            50% {
                opacity: 1;
            }

            100% {
                opacity: 0.6;
            }
        }

        /* ===== THEMES (Overridden by root var logic for simplicity in this proactive mode) ===== */
        /* Using pure dark mode standard for "Professional Display" look */
        /* OVERRIDE Penuh Color to Orange */
        .mini-card.st-penuh {
            background: linear-gradient(90deg, rgba(255, 159, 10, 0.15), rgba(255, 159, 10, 0.05)) !important;
            border-left: 3px solid #FF9F0A !important;
            border-color: rgba(255, 159, 10, 0.3) !important;
            box-shadow: 0 4px 12px rgba(255, 159, 10, 0.1) !important;
        }

        .st-penuh .avatar {
            background: #FF9F0A !important;
        }

        .st-penuh .status {
            color: #FF9F0A !important;
            background: rgba(255, 159, 10, 0.15) !important;
        }

        /* SIDEBAR POLISH */
        .status-header {
            background: linear-gradient(to bottom, rgba(30, 30, 35, 0.95), rgba(30, 30, 35, 0.8)) !important;
            backdrop-filter: blur(12px) !important;
            -webkit-backdrop-filter: blur(12px) !important;
            margin: 0 -24px !important;
            padding: 14px 24px !important;
            border-bottom: 1px solid rgba(255, 255, 255, 0.08) !important;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2) !important;
            z-index: 10 !important;
        }

        .status-header h3 {
            font-size: 11px !important;
            font-weight: 800 !important;
            color: rgba(255, 255, 255, 0.95) !important;
            letter-spacing: 0.12em !important;
            text-transform: uppercase !important;
            display: flex !important;
            align-items: center !important;
            gap: 8px !important;
        }

        .status-header h3::before {
            content: '';
            display: block;
            width: 6px;
            height: 6px;
            background: var(--accent-orange);
            border-radius: 50%;
            box-shadow: 0 0 8px var(--accent-orange);
        }

        /* Target Cuti Header specifically using adjacent sibling combinator */
        .status-section~.status-section .status-header h3::before {
            background: #FF375F !important;
            box-shadow: 0 0 8px #FF375F !important;
        }

        /* ===== IMPROVEMENT #1: ACTIVE SHIFT HIGHLIGHT ===== */
        .platter.has-active-shift {
            border-color: rgba(48, 209, 88, 0.4) !important;
            box-shadow:
                0 4px 12px rgba(0, 0, 0, 0.1),
                0 0 20px rgba(48, 209, 88, 0.12),
                inset 0 0 0 1px rgba(48, 209, 88, 0.08);
        }

        .platter.has-active-shift::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            background: #30D158;
            border-radius: 3px 0 0 3px;
            box-shadow: 0 0 10px rgba(48, 209, 88, 0.5);
        }

        [data-theme="light"] .platter.has-active-shift {
            border-color: rgba(48, 209, 88, 0.3) !important;
            box-shadow:
                0 4px 12px rgba(0, 0, 0, 0.06),
                0 0 20px rgba(48, 209, 88, 0.08);
        }

        /* ===== IMPROVEMENT #3: CARD ENTER ANIMATION ===== */
        @keyframes cardEnter {
            0% {
                opacity: 0;
                transform: translateY(12px) scale(0.97);
            }

            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .platter.card-enter {
            animation: cardEnter 0.5s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
        }

        .mini-card.card-enter {
            animation: cardEnter 0.4s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
        }

        /* ===== IMPROVEMENT #4: PROMINENT JAM DAFTAR ===== */
        .reg-time-box {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 2px;
        }

        .reg-label {
            font-size: 8px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--text-secondary);
            opacity: 0.6;
        }

        .reg-time {
            font-size: 28px;
            font-weight: 800;
            font-variant-numeric: tabular-nums;
            color: var(--text-primary);
            line-height: 1;
            letter-spacing: -0.02em;
        }

        .reg-time.is-active {
            font-size: 34px;
            color: #30D158;
            text-shadow: 0 0 24px rgba(48, 209, 88, 0.4);
        }

        [data-theme="light"] .reg-time {
            color: #1d1d1f;
        }

        [data-theme="light"] .reg-time.is-active {
            color: #30D158;
            text-shadow: none;
        }

        /* ===== IMPROVEMENT #6: PHONE FOOTER ===== */
        .footer-phone {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 11px;
            font-weight: 600;
            color: var(--text-secondary);
            white-space: nowrap;
            padding-left: 16px;
            border-left: 1px solid rgba(255, 255, 255, 0.1);
        }

        .footer-phone .material-icons-round {
            font-size: 14px;
            color: var(--accent-green);
        }

        [data-theme="light"] .footer-phone {
            border-left-color: rgba(0, 0, 0, 0.1);
        }

        /* ===== IMPROVEMENT #7: AUTO-SIZING CARDS ===== */
        .scroller.auto-size .platter {
            padding: 20px 24px;
        }

        .scroller.auto-size .platter .doc-name {
            font-size: 17px;
        }

        .scroller.auto-size .platter .avatar {
            width: 64px;
            height: 64px;
            font-size: 18px;
        }

        .scroller.auto-size .platter .reg-time {
            font-size: 34px;
        }

        .scroller.auto-size .platter .reg-time.is-active {
            font-size: 40px;
        }

        /* ===== IMPROVEMENT #8: PAGINATION SLIDE ===== */
        .paginator {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 6px;
            padding: 8px 0 4px;
            flex-shrink: 0;
        }

        .paginator .pg-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transition: all 0.4s ease;
        }

        .paginator .pg-dot.pg-active {
            width: 20px;
            border-radius: 3px;
            background: var(--accent-blue);
        }

        [data-theme="light"] .paginator .pg-dot {
            background: rgba(0, 0, 0, 0.15);
        }

        [data-theme="light"] .paginator .pg-dot.pg-active {
            background: var(--accent-blue);
        }

        .slide-container {
            flex: 1;
            overflow: hidden;
            position: relative;
        }

        .slide-page {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            flex-direction: column;
            padding: 16px;
            gap: 12px;
            transition: transform 0.6s cubic-bezier(0.25, 0.8, 0.25, 1), opacity 0.4s ease;
        }

        .slide-page.slide-active {
            transform: translateX(0);
            opacity: 1;
        }

        .slide-page.slide-left {
            transform: translateX(-100%);
            opacity: 0;
        }

        .slide-page.slide-right {
            transform: translateX(100%);
            opacity: 0;
        }
    </style>
</head>

<body>
    <div class="app-bg">
        <div class="bg-orb orb1"></div>
        <div class="bg-orb orb2"></div>
        <div class="bg-grid"></div>
    </div>

    <!-- DYNAMIC ISLAND PRE-MOUNT -->
    <div id="dynamicIsland" class="dynamic-island">
        <div class="di-content">
            <div id="diIcon" class="di-spinner"></div>
            <div class="di-text">
                <span id="diTitle" class="di-title">System</span>
                <span id="diMsg" class="di-msg">Loading...</span>
            </div>
        </div>
    </div>
    <div class="ambient-bg"></div>

    <div class="app-container">
        <!-- SIDEBAR -->
        <aside class="sidebar">
            <header class="sidebar-header">
                <div class="brand">
                    <div class="logo-box"><span class="material-icons-round logo-icon">local_hospital</span></div>
                    <div class="title-group">
                        <h1>RSU SIAGA MEDIKA<br>PURBALINGGA</h1>
                        <span>Informasi Jadwal & Antrian</span>
                    </div>
                </div>

                <div class="time-group">
                    <div class="clock" id="clock">00:00</div>
                    <div class="date" id="date">Thinking...</div>
                </div>
            </header>

            <div class="sidebar-content">
                <!-- Penuh Section Content -->
                <div class="status-section"
                    style="display:flex; flex-direction:column; flex:1; min-height:0; overflow:hidden;">
                    <div class="status-header">
                        <h3>KUOTA PENUH / TUTUP</h3>
                    </div>
                    <div id="maskPenuh" style="flex:1; position:relative; overflow:hidden;">
                        <div id="scrollPenuh" style="width:100%; will-change:transform; padding-bottom:10px;">
                            <div id="listPenuh"></div>
                        </div>
                    </div>
                </div>

                <!-- Spacer for Cuti -->
                <!-- Cuti Section -->
                <div class="status-section"
                    style="display:flex; flex-direction:column; flex:1; min-height:0; overflow:hidden; margin-top:20px; padding-top:16px; border-top:1px solid rgba(255,255,255,0.1);">
                    <div class="status-header">
                        <h3>DOKTER CUTI / IJIN</h3>
                    </div>
                    <div id="maskCuti" style="flex:1; position:relative; overflow:hidden;">
                        <div id="scrollCuti" style="width:100%; will-change:transform; padding-bottom:10px;">
                            <div id="listCuti"></div>
                        </div>
                    </div>
                </div>

                <!-- Dead Code to Remove Later -->
                <div style="display:none">
                    <!-- Locked Header Cuti (Needs to be outside scroller? No, Cuti header should be locked too?) 
                         Wait, if we have two lists, and we auto-scroll, we scroll BOTH. 
                         If we lock headers, they must stay visible. 
                         But if the lists are long, they will scroll UNDER the headers? 
                         Actually, sidebar usually scrolls as one unit. 
                         If user wants "lock header", maybe they mean sticky header? 
                         But `overflow:hidden` on parent kills sticky. 
                         
                         Let's interpret "lock header": Keep headers visible at top? 
                         If the lists are separate, maybe we should scroll them INDIVIDUALLY? 
                         "lock header kuota penuh dan dokter cuti" -> distinct headers.
                         
                         If I pull headers out, they will overlap if I just stack them.
                         Better approach: 
                         Split sidebar into TWO scrollable areas. 
                         1. Penuh Area (Header + Scrollable List)
                         2. Cuti Area (Header + Scrollable List)
                         
                         But `sidebarScroller` currently wraps BOTH. 
                         If I want to scroll the whole thing, headers MUST scroll or stay fixed? 
                         If headers stay fixed, they consume vertical space. 
                         
                         Let's try: separate containers for Penuh and Cuti, each with its own scroller?
                         Or just standard sticky headers with `overflow-y: auto` (but user wanted smooth auto-scroll).
                         
                         Auto-scroll usually implies the whole content moves. 
                         If headers are locked, they don't move. 
                         So only likely the list items move.
                         
                         I will separate the two lists into two distinct scrollable areas. 
                         Upper part for Penuh, Lower part for Cuti.
                         And scroller s3 for Penuh, s4 for Cuti.
                    -->
                    <div class="status-header">
                        <h3>DOKTER CUTI / IJIN</h3>
                    </div>
                    <div class="status-group">
                        <!-- OLD DEAD ID -->
                        <div id="listCuti-OLD"></div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- MAIN CONTENT -->
        <main class="content">
            <!-- Islands Container (Grid/Flex) -->
            <div style="flex:1; display:flex; gap:20px; min-height:0;">
                <!-- Bedah Island -->
                <section class="island">
                    <div class="island-header bedah">
                        <span class="island-title">
                            <span class="material-icons-round" style="font-size:18px;">medical_services</span>
                            SURGICAL (BEDAH)
                        </span>
                        <span class="island-badge" id="countBedah">0</span>
                    </div>
                    <div class="slide-container" id="slideBedah">
                        <!-- JS will inject slide pages here -->
                    </div>
                    <div class="paginator" id="pagBedah"></div>
                </section>

                <!-- Non Bedah Island -->
                <section class="island">
                    <div class="island-header non-bedah">
                        <span class="island-title">
                            <span class="material-icons-round" style="font-size:18px;">medication</span>
                            NON-SURGICAL (NON-BEDAH)
                        </span>
                        <span class="island-badge" id="countNonBedah">0</span>
                    </div>
                    <div class="slide-container" id="slideNonBedah">
                        <!-- JS will inject slide pages here -->
                    </div>
                    <div class="paginator" id="pagNonBedah"></div>
                </section>
            </div>

            <!-- Footer Bar -->
            <footer class="footer">
                <div class="legend">
                    <div class="lg-item">
                        <div class="dot" style="background:var(--accent-green)"></div>Buka
                    </div>
                    <div class="lg-item">
                        <div class="dot" style="background:var(--accent-orange)"></div>Penuh
                    </div>
                    <div class="lg-item">
                        <div class="dot" style="background:var(--accent-blue)"></div>Selesai
                    </div>
                    <div class="lg-item">
                        <div class="dot" style="background:var(--accent-red)"></div>Cuti
                    </div>
                </div>
                <div class="ticker">
                    <div class="ticker-inner" id="tickerText">Processing live data stream...</div>
                </div>
                <div class="footer-phone">
                    <span class="material-icons-round">call</span>
                    <span>(0281) 891-610</span>
                </div>
                <div class="status-pill-lg">
                    <div class="live-dot" id="liveDot"></div>
                    <span id="liveText">LIVE STREAM</span>
                </div>
            </footer>
        </main>
    </div>

    <script>
        // ===== CONFIGURATION =====
        const CFG = {
            API_URL: "http://localhost:3000/api/display",
            POLL_MS: 5000, // Faster polling for local network
            SCROLL_PX: 0.4, // Ultra smooth 24px/sec
            SCROLL_PAUSE: 4000
        };

        // ===== CORE ENGINE =====
        const $ = id => document.getElementById(id);
        const esc = t => { const d = document.createElement('div'); d.textContent = t || ''; return d.innerHTML; };
        const initials = n => n ? n.split(' ').map(w => w[0]).join('').slice(0, 2).toUpperCase() : 'DR';

        // Helper: Check if current time is within schedule
        const checkTime = (jamStr) => {
            if (!jamStr || typeof jamStr !== 'string' || jamStr === '-') return false;
            // Normalize: remove all spaces, change . to :
            const clean = jamStr.replace(/\s/g, '').replace(/\./g, ':').toLowerCase();
            // 1. Try Range: "08:00-12:00" or "08:00s/d12:00"
            const rangeMatch = clean.match(/(\d{1,2}:\d{2}).*?(\d{1,2}:\d{2})/);
            if (rangeMatch) {
                const now = new Date();
                const curH = now.getHours();
                const curM = now.getMinutes();
                const currentMins = (curH * 60) + curM;
                const parseMins = (t) => {
                    const [h, m] = t.split(':').map(Number);
                    return (h * 60) + m;
                };
                const start = parseMins(rangeMatch[1]);
                const end = parseMins(rangeMatch[2]);
                // Handle overnight shifts
                if (end < start) {
                    return currentMins >= start || currentMins <= end;
                }
                return currentMins >= start && currentMins <= end;
            }
            // 2. Try Single Time: "08:00"
            const singleMatch = clean.match(/(\d{1,2}:\d{2})/);
            if (singleMatch) {
                const now = new Date();
                const curH = now.getHours();
                const curM = now.getMinutes();
                const currentMins = (curH * 60) + curM;
                const parseMins = (t) => {
                    const [h, m] = t.split(':').map(Number);
                    return (h * 60) + m;
                };
                const start = parseMins(singleMatch[1]);
                // Assume 4 hour shift if only start time is known
                const end = start + (4 * 60);
                return currentMins >= start && currentMins <= end;
            }
            return false;
        };

        // Slide Paginator (replaces SmoothScroller)
        class Paginator {
            constructor(containerId, paginatorId) {
                this.container = $(containerId);
                this.paginator = $(paginatorId);
                this.pages = [];
                this.current = 0;
                this.timer = null;
                this.interval = 6000; // 6s per page
            }
            setPages(htmlList, perPage) {
                if (!this.container) return;
                // Chunk items into pages
                this.pages = [];
                for (let i = 0; i < htmlList.length; i += perPage) {
                    this.pages.push(htmlList.slice(i, i + perPage));
                }
                if (this.pages.length === 0) {
                    this.container.innerHTML = '<div style="display:flex;align-items:center;justify-content:center;height:100%;opacity:0.3;font-size:13px;font-weight:600">Belum ada dokter</div>';
                    if (this.paginator) this.paginator.innerHTML = '';
                    this.stopAuto();
                    return;
                }
                this.current = Math.min(this.current, this.pages.length - 1);
                this.showPage(this.current, false);
                // Paginator dots
                if (this.paginator) {
                    if (this.pages.length <= 1) {
                        this.paginator.innerHTML = '';
                    } else {
                        this.paginator.innerHTML = this.pages.map((_, i) =>
                            `<span class="pg-dot ${i === this.current ? 'pg-active' : ''}"></span>`
                        ).join('');
                    }
                }
                // Auto-advance
                this.startAuto();
            }
            showPage(idx, animate = true) {
                if (!this.container || !this.pages[idx]) return;
                const html = this.pages[idx].join('');
                if (animate) {
                    // Create new page, slide in
                    const oldPage = this.container.querySelector('.slide-active');
                    if (oldPage) {
                        oldPage.className = 'slide-page slide-left';
                        setTimeout(() => oldPage.remove(), 600);
                    }
                    const newPage = document.createElement('div');
                    newPage.className = 'slide-page slide-right';
                    newPage.innerHTML = html;
                    this.container.appendChild(newPage);
                    requestAnimationFrame(() => {
                        requestAnimationFrame(() => {
                            newPage.className = 'slide-page slide-active';
                        });
                    });
                } else {
                    this.container.innerHTML = `<div class="slide-page slide-active">${html}</div>`;
                }
                this.current = idx;
                // Update dots
                if (this.paginator) {
                    const dots = this.paginator.querySelectorAll('.pg-dot');
                    dots.forEach((d, i) => d.className = 'pg-dot' + (i === idx ? ' pg-active' : ''));
                }
            }
            startAuto() {
                this.stopAuto();
                if (this.pages.length <= 1) return;
                this.timer = setInterval(() => {
                    const next = (this.current + 1) % this.pages.length;
                    this.showPage(next, true);
                }, this.interval);
            }
            stopAuto() {
                if (this.timer) { clearInterval(this.timer); this.timer = null; }
            }
        }

        const pagBedah = new Paginator('slideBedah', 'pagBedah');
        const pagNonBedah = new Paginator('slideNonBedah', 'pagNonBedah');
        const s3 = new SmoothScroller('scrollPenuh');
        const s4 = new SmoothScroller('scrollCuti');

        // Dynamic Island Controller (with Queue)
        const Island = {
            el: $('dynamicIsland'),
            icon: $('diIcon'),
            title: $('diTitle'),
            msg: $('diMsg'),
            timer: null,
            queue: [],
            busy: false,
            show(title, msg, type = 'load', duration = 3000) {
                this.queue.push({ title, msg, type, duration });
                if (!this.busy) this._next();
            },
            _next() {
                if (this.queue.length === 0) { this.busy = false; return; }
                this.busy = true;
                const n = this.queue.shift();
                this.title.textContent = n.title;
                this.msg.textContent = n.msg;
                this.el.classList.remove('di-warn', 'di-success');
                // Icon Logic
                if (n.type === 'load') {
                    this.icon.className = 'di-spinner';
                } else if (n.type === 'warn') {
                    this.icon.className = 'material-icons-round di-icon';
                    this.icon.textContent = 'error';
                    this.el.classList.add('di-warn');
                } else if (n.type === 'info') {
                    this.icon.className = 'material-icons-round di-icon';
                    this.icon.textContent = 'info';
                } else if (n.type === 'success') {
                    this.icon.className = 'material-icons-round di-icon';
                    this.icon.textContent = 'check_circle';
                    this.el.classList.add('di-success');
                }
                this.el.classList.add('expanded');
                if (this.timer) clearTimeout(this.timer);
                this.timer = setTimeout(() => {
                    this.hide();
                    // Wait for hide animation, then show next
                    setTimeout(() => this._next(), 600);
                }, n.duration);
            },
            hide() {
                this.el.classList.remove('expanded');
            }
        };

        // Main App Logic
        const App = {
            _prevDoctors: {}, // Track previous doctor states for change detection
            _greetSent: {},   // Track which greetings have been sent today
            _customMsgIdx: 0,
            _customMsgs: [
                { title: 'Info', text: 'Terimakasih sudah menunggu ' },
                { title: 'Info', text: 'Terimakasih sudah tertib ' },
                { title: 'Antrian', text: 'Belum online? Yo ambil antrian ' },
                { title: 'Info', text: 'Terimakasih sudah mengantri ' }
            ],

            _isFetching: false, // Network lock

            _manualOverride: false,

            async init() {
                // Greeting based on time
                const h = new Date().getHours();
                const greeting = h < 11 ? 'Selamat Pagi' : h < 15 ? 'Selamat Siang' : h < 18 ? 'Selamat Sore' : 'Selamat Malam';
                Island.show('PETUGAS PENDAFTARAN', greeting + ' ', 'success', 3000);

                this.clock(); setInterval(() => this.clock(), 1000);
                this.updateTheme(); setInterval(() => this.updateTheme(), 60000);
                this.skel();

                await this.fetch();
                s3.start(); s4.start(); // Sidebar scrollers only
                setInterval(() => this.fetch(), CFG.POLL_MS);

                // Keyboard Shortcuts
                document.addEventListener('keydown', (e) => {
                    if (e.key.toLowerCase() === 't' && e.shiftKey) {
                        this.toggleTheme();
                    }
                    // Hidden Reload Shortcut (Shift + R)
                    if (e.key.toLowerCase() === 'r' && e.shiftKey) {
                        window.location.reload();
                    }
                });

                // Watchdog: Auto-reload every 1 hour to clear memory
                setTimeout(() => window.location.reload(), 3600000);
            },

            clock() {
                const d = new Date();
                $('clock').textContent = d.toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit' });
                $('date').textContent = d.toLocaleDateString('id-ID', { weekday: 'long', day: 'numeric', month: 'long' }).toUpperCase();
                const h = d.getHours();
                const m = d.getMinutes();
                const s = d.getSeconds();
                // Custom Rotating Notification every 5 minutes (avoid clash with break time at 12:00)
                if (m % 5 === 0 && s === 0 && h !== 12) {
                    const msg = this._customMsgs[this._customMsgIdx];
                    Island.show(msg.title, msg.text, 'info', 6000);
                    this._customMsgIdx = (this._customMsgIdx + 1) % this._customMsgs.length;
                }
                // Break Time Logic (12:00 - 13:00)
                if (h === 12 && m % 10 === 0 && s === 0) {
                    Island.show('Istirahat', 'Sedang Jam Istirahat ', 'info', 10000);
                }
                // Time-based Greetings (fire once at the exact hour)
                if (s === 0 && m === 0) {
                    const key = 'greet_' + h;
                    if (!this._greetSent[key]) {
                        this._greetSent[key] = true;
                        if (h === 6) Island.show('Pagi', 'Selamat Pagi ', 'info', 4000);
                        if (h === 12) Island.show('Siang', 'Selamat Siang ', 'info', 4000);
                        if (h === 18) Island.show('Sore', 'Selamat Sore ', 'info', 4000);
                    }
                }
            },

            toggleTheme() {
                this._manualOverride = true;
                const current = document.documentElement.getAttribute('data-theme');
                const next = current === 'light' ? 'dark' : 'light';
                document.documentElement.setAttribute('data-theme', next);
                Island.show('Theme Debug', `Switched to ${next.toUpperCase()} Mode`, 'info', 2000);
            },

            updateTheme() {
                if (this._manualOverride) return;
                const h = new Date().getHours();
                const isLight = h >= 6 && h < 16;
                document.documentElement.setAttribute('data-theme', isLight ? 'light' : 'dark');
            },

            skel() {
                const make = () => Array(4).fill(0).map(() =>
                    `<div class="platter" style="height:76px; opacity:0.6"><div class="skel" style="width:48px;height:48px;border-radius:50%"></div><div class="skel" style="width:60%;height:16px"></div></div>`
                ).join('');
                const skelPage = `<div class="slide-page slide-active">${make()}</div>`;
                $('slideBedah').innerHTML = skelPage;
                $('slideNonBedah').innerHTML = skelPage;
            },

            async fetch() {
                if (this._isFetching) return;
                this._isFetching = true;

                try {
                    const response = await fetch(CFG.API_URL);
                    const data = await response.json();

                    // Map API data to internal format
                    const mappedDoctors = data.doctors.map(d => ({
                        Dokter: d.name,
                        Spesialis: d.specialty,
                        Status: d.status,
                        Jam: d.practiceTime || `${d.startTime}-${d.endTime}`,
                        CallTime: d.callTime || '00:00',
                        RegistrationTime: d.currentRegistrationTime || '-',
                        Code: d.queueCode,
                        Jenis: d.category,
                        ShiftPills: d.shiftPills || []
                    }));

                    this._detectChanges(mappedDoctors);
                    this.render(mappedDoctors);

                    // Ticker
                    if (data.settings) {
                        if (data.settings.runTextMessage) {
                            $('tickerText').innerHTML = Array(3).fill(data.settings.runTextMessage).join('   ');
                        }
                        // Update Custom Messages for Island
                        if (data.settings.customMessages && data.settings.customMessages.length > 0) {
                            this._customMsgs = data.settings.customMessages;
                        }
                    }

                    this.status('LIVE STREAM', false);

                } catch (e) {
                    console.error(e);
                    this.status('CONNECTING...', true);
                } finally {
                    this._isFetching = false;
                }
            },

            _detectChanges(data) {
                if (!data) return;
                const now = {};
                data.forEach(d => {
                    const name = d.Dokter;
                    const code = d.Code || '';
                    const isActive = d.Status === 'BUKA' || d.Status === 'PENUH';
                    now[name] = isActive;

                    if (this._prevDoctors[name] === false && isActive) {
                        Island.show('Praktek Dimulai ' + code, `${name} Mulai Melayani`, 'success', 5000);
                    }
                    this._prevDoctors[name] = isActive;
                });
            },

            status(msg, warn) {
                $('liveText').textContent = msg;
                $('liveDot').className = warn ? 'live-dot warn' : 'live-dot';
            },

            render(data) {
                if (!data) return;
                const group = { Bedah: [], NonBedah: [], Penuh: [], Cuti: [] };

                // Show all doctors (only hide LIBUR)
                const activeData = data.filter(d =>
                    !['LIBUR'].some(x => d.Status.includes(x))
                );

                activeData.sort((a, b) => {
                    const score = s => {
                        if (s.includes('BUKA')) return 4;
                        if (s.includes('PENUH')) return 3;
                        if (s.includes('OPERASI')) return 2;
                        if (s.includes('ISTIRAHAT')) return 2;
                        if (s.includes('CUTI')) return 1;
                        return 0;
                    };
                    return score(b.Status) - score(a.Status);
                });

                activeData.forEach(d => {
                    const s = d.Status.toUpperCase();
                    if (s.includes('PENUH') || s.includes('TUTUP') || s.includes('OPERASI')) {
                        group.Penuh.push(d);
                    } else if (s.includes('CUTI') || s.includes('IJIN')) {
                        group.Cuti.push(d);
                    } else {
                        const g = d.Jenis === 'Bedah' ? 'Bedah' : 'NonBedah';
                        if (group[g]) group[g].push(d);
                    }
                });

                // Improvement #7: Auto-size  calculate items per page
                // If 4 doctors, show all on 1 page (larger cards)
                const PER_PAGE = 5; // Max cards per page
                const bedahCards = group.Bedah.map((d, i) => this.renderDoctor(d, i));
                const nonBedahCards = group.NonBedah.map((d, i) => this.renderDoctor(d, i));

                // Improvement #8: Pagination
                pagBedah.setPages(bedahCards, PER_PAGE);
                pagNonBedah.setPages(nonBedahCards, PER_PAGE);

                // Sidebar lists (keep scroll)
                const renderList = (id, list, renderer) => {
                    const el = $(id);
                    if (el) el.innerHTML = list.map(renderer).join('');
                };
                renderList('listPenuh', group.Penuh, d => this.renderMiniCard(d, 'st-penuh'));
                renderList('listCuti', group.Cuti, d => this.renderMiniCard(d, 'st-cuti'));

                $('countBedah').textContent = group.Bedah.length;
                $('countNonBedah').textContent = group.NonBedah.length;

                // Sidebar scroll metrics
                requestAnimationFrame(() => {
                    if (s3) s3.updateMetrics();
                    if (s4) s4.updateMetrics();
                });
            },

            renderMiniCard(doc, typeClass) {
                return `
                <div class="mini-card ${typeClass}">
                    <div class="avatar">${doc.Code || initials(doc.Dokter)}</div>
                    <div class="info">
                        <div class="name">${esc(doc.Dokter)}</div>
                        <div class="spec">${esc(doc.Spesialis)}</div>
                    </div>
                    <div class="status">${esc(doc.Status)}</div>
                </div>
                `;
            },

            renderDoctor(doc, idx) {
                const statusMap = {
                    'BUKA': 'st-buka',
                    'PENUH': 'st-penuh',
                    'CUTI': 'st-cuti',
                    'SELESAI': 'st-selesai',
                    'OPERASI': 'st-penuh',
                    'ISTIRAHAT': 'st-penuh',
                    'BELUM BUKA': 'st-nopoli',
                    'TIDAK PRAKTEK': 'st-nopoli'
                };
                const cls = statusMap[doc.Status] || 'st-nopoli';
                const isActive = doc.Status === 'BUKA';

                // Build shift pills HTML + detect active shift (#1)
                let shiftPillsHtml = '';
                let hasActiveShift = false;
                const now = new Date();
                const curMins = now.getHours() * 60 + now.getMinutes();

                if (doc.ShiftPills && doc.ShiftPills.length > 0) {
                    const pills = doc.ShiftPills.map(sp => {
                        if (!sp.time) return '';
                        const parts = sp.time.split('-');
                        if (parts.length < 2) return '';
                        const startM = parseInt(parts[0].split(':')[0]) * 60 + parseInt(parts[0].split(':')[1] || '0');
                        const endM = parseInt(parts[1].split(':')[0]) * 60 + parseInt(parts[1].split(':')[1] || '0');
                        const isNow = curMins >= startM && curMins < endM && !sp.disabled;
                        if (isNow) hasActiveShift = true;
                        const pcls = sp.disabled ? 'sp-disabled' : isNow ? 'sp-active' : '';
                        return `<span class="shift-pill ${pcls}"><span class="material-icons-round" style="font-size:9px;opacity:0.7">schedule</span>${esc(sp.time)}${isNow ? '<span class="sp-dot"></span>' : ''}${sp.disabled ? ' <span style="font-size:8px">\u2715</span>' : ''}</span>`;
                    }).filter(Boolean).join('');
                    shiftPillsHtml = `<div class="shift-pills">${pills}</div>`;
                } else if (doc.Jam && doc.Jam !== '-') {
                    shiftPillsHtml = `<div class="doc-jam"><span class="material-icons-round" style="font-size:10px; opacity:0.7">schedule</span> ${esc(doc.Jam)}</div>`;
                    hasActiveShift = checkTime(doc.Jam);
                }

                // Improvement #1: active shift highlight class
                const activeShiftCls = hasActiveShift ? ' has-active-shift' : '';
                // Improvement #3: staggered card enter animation
                const animDelay = idx !== undefined ? `animation-delay:${idx * 80}ms` : '';

                // Improvement #4: Prominent Jam Daftar
                const hasRegTime = doc.RegistrationTime && doc.RegistrationTime !== '-';
                const regTimeHtml = hasRegTime
                    ? `<div class="reg-time-box">
                        <span class="reg-label">JAM DAFTAR</span>
                        <span class="reg-time ${isActive ? 'is-active' : ''}">${esc(doc.RegistrationTime)}</span>
                       </div>`
                    : '';

                return `
                <div class="platter ${cls}${activeShiftCls} card-enter" style="${animDelay}" ${isActive ? 'data-active="true"' : ''}>
                    <div class="platter-body">
                        <div class="avatar-col">
                            <div class="avatar">${doc.Code || initials(doc.Dokter)}</div>
                        </div>
                        <div class="info-col">
                            <div class="doc-name">${esc(doc.Dokter)}</div>
                            <div style="display:flex; flex-direction:column; gap:2px;">
                                <div class="doc-spec">${esc(doc.Spesialis)}</div>
                                ${shiftPillsHtml}
                            </div>
                        </div>
                        <div class="status-col">
                            ${regTimeHtml}
                            <div class="status-pill">${esc(doc.Status)}</div>
                        </div>
                    </div>
                </div>
                `;
            },

            ticker(data) {
                if (!data) return;
                const active = data.filter(d => {
                    const s = (d.StatusCuti || '').toLowerCase();
                    return s.includes('sedang') || s.includes('akan');
                });

                let txt = ' 2026 TPPRJ RSU Siaga Medika Purbalingga. All Rights Reserved. ';
                if (active.length) {
                    txt = active.map(d => `   [${d.Code || 'DR'}] ${esc(d.Dokter)} (${esc(d.Spesialis)}) - ${esc(d.Tanggal)}`).join('   ');
                }

                const el = $('tickerText');
                el.innerHTML = txt + '   ' + txt + '   ' + txt; // Triple buffer for smooth loop
            }
        };

        App.init();
    </script>
</body>

</html>